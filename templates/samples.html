<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Adjustable Webcam Access with Zoom</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/samples.css') }}">
</head>

<body>
    <!-- realistic color-blindness SVG filters (keep for protan/deutan) -->
    <svg xmlns="http://www.w3.org/2000/svg" style="position:absolute;width:0;height:0;overflow:hidden" aria-hidden="true" focusable="false">
        <defs>
            <!-- Protanopia -->
            <filter id="filter-protanopia">
            <feColorMatrix type="matrix" values="
                0.152  1.053 -0.205  0  0
                0.115  0.786  0.099  0  0
                -0.004 -0.048  1.052  0  0
                0      0      0      1  0"/>
            </filter>

            <!-- Deuteranopia -->
            <filter id="filter-deuteranopia">
            <feColorMatrix type="matrix" values="
                0.367  0.861 -0.228  0  0
                0.280  0.673  0.047  0  0
                -0.012  0.043  0.969  0  0
                0      0      0      1  0"/>
            </filter>
            
            <!-- Tritanopia -->
            <filter id="filter-tritanopia">
            <feColorMatrix type="matrix" values="
                1.256 -0.077 -0.179  0  0
                -0.078  0.931  0.148  0  0
                0.005  0.691  0.304  0  0
                0      0      0      1  0"/>
            </filter>
        </defs>
    </svg>

    <button class="btn" id="back-btn" onclick="goHome()">⟵ Back</button>
    <div id="video-container">
        <video id="video" src="" autoplay playsinline muted></video>
        
        <div id="controls">
            <button class="btn" id="filter-button" onclick="toggleMenu()">Filters</button>
            <button class="btn" id="reset-btn" onclick="resetZoom()" style="display: none;">Reset Zoom</button>
            <button class="btn" id="mask-btn" aria-pressed="false" title="Toggle mask">Mask</button>
            <div id="mask-controls" style="display:none;">
                <label for="mask-radius" id="mask-radius-label" style="color:#fff; margin-right:8px;">Height</label>
                <input type="range" id="mask-radius" min="0" max="475" value="100" />
                <button class="btn" id="mask-shape-btn" title="Shape" style="display:none;">Shape</button>
            </div>
        </div>
        
        <div class="zoom-container">
            <button class="btn zoom-btn" id="zoom-in" aria-label="Zoom in" onclick="changeZoom(0.1)">+</button>
            <input type="range" id="zoom-slider" min="1" max="5" step="0.1" value="1" onchange="adjustZoom()">
            <button class="btn zoom-btn" id="zoom-out" aria-label="Zoom out" onclick="changeZoom(-0.1)">−</button>
        </div>
    </div>

    <div id="menu" class="hidden">
        <div id="filter-list">
            <h3>Predefined Filters</h3>
            <div class="scrollable">
                <button class="filter-btn" onclick="applyNormal()">Normal</button>
                <button class="filter-btn" onclick="applyProtanopia()">PT</button>
                <button class="filter-btn" onclick="applyDeuteranopia()">DT</button>
                <button class="filter-btn" onclick="applyTritanopia()">TT</button>
                <button class="filter-btn" onclick="applyGrayscale()">Grayscale</button>
                <button class="filter-btn" onclick="applyInverted()">Inverted</button>
                <button class="filter-btn" onclick="applyInvertedGrayscale()">Inverted Grayscale</button>
                <button class="filter-btn" onclick="applyBlueOnYellow()">Blue on Yellow</button>
                <button class="filter-btn" onclick="applyNeonOrangeOnBlack()">Neon Orange on Black</button>
                <button class="filter-btn" onclick="applyNeonGreenOnBlack()">Neon Green on Black</button>
                <button class="filter-btn" onclick="applyYellowOnBlack()">Yellow on Black</button>
                <button class="filter-btn" onclick="applyPurpleOnBlack()">Purple on Black</button>
            </div>

            <div class="custom-filter">
                <h3>Adjustable Filters</h3>

                <div class="custom-slider-group">
                    <div class="custom-slider-col">
                        <label for="hue">Hue</label>
                        <input type="range" id="hue" min="0" max="360" value="0" onchange="applyCustomFilter()">
                    </div>

                    <div class="custom-slider-col">
                        <label for="brightness">Brightness</label>
                        <input type="range" id="brightness" min="0" max="200" value="100" onchange="applyCustomFilter()">
                    </div>

                    <div class="custom-slider-col">
                        <label for="contrast">Contrast</label>
                        <input type="range" id="contrast" min="0" max="200" value="100" onchange="applyCustomFilter()">
                    </div>

                    <div class="custom-slider-col">
                        <label for="saturation">Saturation</label>
                        <input type="range" id="saturation" min="0" max="200" value="100" onchange="applyCustomFilter()">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- load samples js from Flask static/ -->
    <script defer src="{{ url_for('static', filename='js/samples.js') }}"></script>
</body>

</html>
